* To do items [85%]
** DONE [#A] Create =SortingDesk= client
- State "DONE"       from "IN-PROGRESS" [2014-11-21 Fri 11:21]
- State "IN-PROGRESS" from "TODO"       [2014-11-21 Fri 09:12]
** DONE Move logic pertaining to the concept of bin into =SortingDesk=
- State "DONE"       from "IN-PROGRESS" [2014-11-21 Fri 11:21]
- State "IN-PROGRESS" from "TODO"       [2014-11-21 Fri 09:16]
** DONE Rename =TextItem= to =Item=
- State "DONE"       from "TODO"       [2014-11-21 Fri 12:26]
** TODO =ControllerKeyboard=: must allow clients to process interesting events
`SortingDesk' doesn't currently allow `ControllerBin' to receive notifications about the global keyboard input state, which means the user is unable to perform actions affecting bins with the keyboard at the moment.
** DONE Rename =SortingDesk= component to =SortingQueue=
- State "DONE"       from "IN-PROGRESS" [2014-11-21 Fri 09:12]
- State "IN-PROGRESS" from "TODO"       [2014-11-21 Fri 07:53]
** DONE Rename old Sorting Desk's API to reflect component rename
- State "DONE"       from "IN-PROGRESS" [2014-11-21 Fri 09:12]
- State "IN-PROGRESS" from "TODO"       [2014-11-21 Fri 08:15]
** TODO Employ use of classes to identify hover state and possibly others
This is meant to resolve the problem that parent elements can't be styled depending on mouse state, such as =:hover=, when nested elements are used. The only way to reliably solve this problem is to rely on CSS classes to signal mouse states.
** TODO Ensure =addBin= callback exists when the 'bin add' button exists
** TODO Tests [0%]
*** TODO init: enforce test compartmentalisation through cloning of nodes
*** TODO instance: ensure reset doesn't run twice
*** TODO instance: require =visibleItems= to be greater than 0
*** TODO callbacks: removed test for =renderAddButton=
*** TODO callbacks: removed test for =renderPrimaryBin=
*** TODO callbacks: removed test for =renderSecondaryBin=
*** TODO callbacks: removed test for =addPrimarySubBin=
*** TODO callbacks: removed test for =addSecondaryBin=
*** TODO interface: ensure 'bin add' button is created prior to using it
*** TODO interface: ensure correct number of sub-bins are created
*** TODO interface: removed test for adding of sub-bin
** TODO Create a list of interesting events to advertise via an Events controller
** TODO [#B] Prefix text-items' and bins' node ids
- State "TODO"       from "WAIT"       [2014-09-07 Sun 08:16]
- State "WAIT"       from "TODO"       [2014-09-05 Fri 10:41] \\
  Currently waiting to hear from support as to whether ids are guaranteed to always be unique.
** TODO Text items controller to notify client when no more items available
** TODO Create examples [50%]
*** TODO No content ids
*** DONE Sub-bins
- State "DONE"       from "TODO"       [2014-10-23 Thu 14:42]
** WAIT Implement Events controller based on the publisher-subscriber design pattern
- State "WAIT"       from "TODO"       [2014-10-23 Thu 14:42]
** WAIT Resolve all annotated TODO items
- State "WAIT"       from "TODO"       [2014-10-15 Wed 13:57] \\
  To be done when Sorting Desk has reached a significant milestone.
** WAIT Implement keyboard auto-repeat with configurable frequency
- State "WAIT"       from "TODO"       [2014-10-15 Wed 13:56] \\
  Probable unwanted feature.
** WAIT [#A] Allow bin statements to be edited
- State "WAIT"       from "TODO"       [2014-10-10 Fri 16:11] \\
  This will most likely require involvement of the client via a callback.
- State "TODO"       from "WAIT"       [2014-09-05 Fri 10:42]
- State "WAIT"       from "TODO"       [2014-08-22 Fri 13:24] \\
  Not proceeding with this until it's clear whether bins based on existing text items are even editable.
** DONE Fix presently broken tests
- State "DONE"       from "IN-PROGRESS" [2014-10-23 Thu 13:30]
- State "IN-PROGRESS" from "TODO"       [2014-10-23 Thu 11:32]
** DONE Reduce CSS required by Sorting Desk
- State "DONE"       from "TODO"       [2014-10-15 Wed 14:35]
** DONE Unbundle examples
- State "DONE"       from "TODO"       [2014-10-15 Wed 13:58]
** DONE Create bin iterator
- State "DONE"       from "TODO"       [2014-10-15 Wed 13:34]
** DONE Create factory method for sub-bin instantiation
- State "DONE"       from "TODO"       [2014-10-15 Wed 13:33]
** DONE Remove unused methods from =Api= namespace
- State "DONE"       from "TODO"       [2014-10-15 Wed 13:48]
** DONE =TextItem= uses hard-coded CSS classes
- State "DONE"       from "TODO"       [2014-10-10 Fri 16:20]
** DONE Add support for sub-bins
- State "DONE"       from "IN-PROGRESS" [2014-10-10 Fri 16:10]
- State "IN-PROGRESS" from "WAIT"       [2014-10-10 Fri 11:52]
- State "WAIT"       from "TODO"       [2014-10-09 Thu 10:40] \\
  It is currently unclear what the interface should be like.
** DONE Allow keyboard shortcuts to be assigned programmatically
- State "DONE"       from "TODO"       [2014-10-10 Fri 16:10]
** DONE Delete extraneous examples
- State "DONE"       from "TODO"       [2014-10-09 Thu 19:22]
** DONE All bins are born equal
- State "DONE"       from "IN-PROGRESS" [2014-10-09 Thu 17:49]
- State "IN-PROGRESS" from "TODO"       [2014-10-01 Wed 10:36]
End bin strata.
** DONE Revamp examples
- State "DONE"       from "TODO"       [2014-10-09 Thu 17:48]
** DONE Rework reset sequence
- State "DONE"       from "IN-PROGRESS" [2014-10-09 Thu 10:13]
- State "IN-PROGRESS" from "TODO"       [2014-10-09 Thu 08:11]
*** DONE Finish it
- State "DONE"       from "TODO"       [2014-10-09 Thu 09:02]
** DONE Merge =Bin= and =SubBin= classes
- State "DONE"       from "TODO"       [2014-10-09 Thu 10:12]
*** DONE Merge =BinBase= and =Bin= classes
- State "DONE"       from "TODO"       [2014-10-09 Thu 10:12]
** DONE Rename =Generic= suffixed classes to =Default=
- State "DONE"       from "TODO"       [2014-10-09 Thu 10:02]
** DONE Rename `isInitialised' to simply 'initialised`
- State "DONE"       from "TODO"       [2014-10-09 Thu 08:11]
** DONE End `render' prefixed callbacks and expect constructors instead
- State "DONE"       from "TODO"       [2014-10-09 Thu 08:12]
** DONE Simplify initialisation of Sorting Desk
- State "DONE"       from "IN-PROGRESS" [2014-10-09 Thu 08:12]
- State "IN-PROGRESS" from "TODO"       [2014-09-30 Tue 18:54]
Allow the following forms:

1) new SortingDesk( options, callbacks );
2) new SortingDesk( $("#items"), callbacks );

Require `moreTexts' callback to be present. Require `getBinData' callback if `contentIds' given.
** DONE [#A] Write jasmine (unit) tests
- State "DONE"       from "IN-PROGRESS" [2014-10-09 Thu 08:12]
- State "IN-PROGRESS" from "TODO"       [2014-09-12 Fri 09:54]
Similar to the tests found on: =git@devhub.diffeo.com:streamboard.git=
** DONE Create `Owned' class
- State "DONE"       from "TODO"       [2014-10-02 Thu 15:42]
** DONE Create `Drawable' class
- State "DONE"       from "TODO"       [2014-10-02 Thu 15:42]
** DONE Employ getters and setters
- State "DONE"       from "TODO"       [2014-10-02 Thu 15:42]
** DONE `Controller' base class should contain `owner' instance
- State "DONE"       from "TODO"       [2014-10-02 Thu 15:42]
** DONE Remove `getOption' method
- State "DONE"       from "TODO"       [2014-10-02 Thu 12:02]
** DONE Remove `getController' method
- State "DONE"       from "TODO"       [2014-10-02 Thu 12:02]
** DONE Review `Instance' and break it up into smaller components
- State "DONE"       from "TODO"       [2014-10-02 Thu 15:42]
** DONE Rename `list' to `items'
- State "DONE"       from "TODO"       [2014-10-02 Thu 12:29]
** DONE Rename `container' to `bins'
- State "DONE"       from "TODO"       [2014-10-02 Thu 12:29]
** DONE Make `options' private
- State "DONE"       from "TODO"       [2014-10-02 Thu 12:29]
** DONE Remove hardcoded `less' and `more' CSS classes
- State "DONE"       from "TODO"       [2014-10-02 Thu 12:29]
** DONE Migrate to a full OO design
- State "DONE"       from "TODO"       [2014-10-01 Wed 18:18]
** DONE Move responsibility for loading notifications entirely to the client
- State "DONE"       from "IN-PROGRESS" [2014-10-01 Wed 12:18]
Use a callback for this purpose.
** DONE Rename `binDelete' to `buttonDelete'
- State "DONE"       from "TODO"       [2014-10-01 Wed 10:37]
** DONE Remove reliance on CSS classes except for those necessary
- State "DONE"       from "TODO"       [2014-10-01 Wed 10:37]
** DONE Simplify use of CSS
- State "DONE"       from "TODO"       [2014-10-01 Wed 10:37]
** DONE Allow Sorting Desk to be instantiated multiple times
- State "DONE"       from "TODO"       [2014-09-30 Tue 18:47]
** DONE Ensure component is fault proof when faced with absent elements
- State "DONE"       from "IN-PROGRESS" [2014-09-18 Thu 12:09]
- State "IN-PROGRESS" from "WAIT"       [2014-09-12 Fri 21:17]
- State "WAIT"       from "TODO"       [2014-09-09 Tue 18:05] \\
  Unsure what other elements it needs to be fault tolerant for.
** DONE Implement public method `remove'
- State "DONE"       from "TODO"       [2014-09-18 Thu 12:09]
** DONE Allow duration of special effects to be configurable
- State "DONE"       from "TODO"       [2014-09-18 Thu 12:09]
E.g. fade in/out of elements.

This would allow for configurability on the client side and would have the added benefit of allowing tests to run FASTER while being more deterministic.
** DONE Encode bin and text-item ids
- State "DONE"       from "TODO"       [2014-09-18 Thu 08:10]
** DONE Make Sorting Desk compatible with RequireJs
- State "DONE"       from "TODO"       [2014-09-15 Mon 18:01]
** DONE [#A] Employ Module pattern
- State "DONE"       from "TODO"       [2014-09-12 Fri 21:17]
** DONE [#A] Save data by issuing calls to diffeo's API
- State "DONE"       from "WAIT"       [2014-09-07 Sun 10:47]
- State "WAIT"       from "TODO"       [2014-09-05 Fri 11:53] \\
  Waiting to hear from support.
** DONE Create API that uses mock data
- State "DONE"       from "TODO"       [2014-09-07 Sun 10:47]
** DONE Show an 'X' on each text item to allow it to be dismissed on mouse click
- State "DONE"       from "TODO"       [2014-09-06 Sat 10:11]
** DONE Enable dismissal of text items via a configurable keystroke
- State "DONE"       from "TODO"       [2014-09-06 Sat 09:46]
** DONE Allow text item navigation keystrokes to be configurable
- State "DONE"       from "TODO"       [2014-09-06 Sat 09:38]
** DONE Create drag and drop infrastructure
- State "DONE"       from "TODO"       [2014-09-06 Sat 09:23]
Must be compatible with IE.
** DONE [#A] Allow a text item to be sorted into a non-bin container (dismiss)
- State "DONE"       from "TODO"       [2014-09-05 Fri 11:08]
** DONE [#A] Implement HTML5 drag and drop
- State "DONE"       from "TODO"       [2014-09-05 Fri 10:26]
** DONE Invoke API to process bin removal
- State "DONE"       from "TODO"       [2014-08-22 Fri 13:20]
** DONE Implement actual deletion of bins
- State "DONE"       from "IN-PROGRESS" [2014-08-21 Thu 20:54]
- State "IN-PROGRESS" from "TODO"       [2014-08-21 Thu 19:55]
** DONE Skip chars that are part of HTML tags
- State "DONE"       from "TODO"       [2014-08-21 Thu 16:46]
=TextItemSnippet.highlights= must not count chars that are part of HTML tags towards the limit.
** DONE Create a bin when a user drags a text item on a bin add button
- State "DONE"       from "TODO"       [2014-08-21 Thu 15:09]
** DONE Create logic for =Api.textCanBeReduced=
- State "DONE"       from "TODO"       [2014-08-21 Thu 15:07]
Presently always returns =true=.
** DONE Engineer algorithm for optimal display of large text items
- State "DONE"       from "IN-PROGRESS" [2014-08-21 Thu 09:05]
- State "IN-PROGRESS" from "TODO"       [2014-08-20 Wed 15:33]
  
1. perhaps create a very condensed view that shows only the text inside the _first_ bold tag.
2. another view might be to show only text inside bold tags with perhaps a few words left and right.
3. include a /more/ button that shows the full text.

According to the layout above, there would a total of 3 different ways a text item could be displayed: condensed => highlights => unrestricted.
** DONE Fix text item scrolling issues
- State "DONE"       from "IN-PROGRESS" [2014-08-21 Thu 08:00]
- State "IN-PROGRESS" from "TODO"       [2014-08-21 Thu 07:42]
** DONE Hook up to diffeo's API to retrieve bin/text data
- State "DONE"       from "IN-PROGRESS" [2014-08-21 Thu 07:21]
- State "IN-PROGRESS" from "TODO"       [2014-08-20 Wed 11:27]

Links:

- [[http://dev5.diffeo.com:10982/namespaces/miguel_sorting_desk/s2/?noprof=1&format=json&label=true&node_id=sid_1395342980-f2b0c629b5462959da7691e877016eef%23c2a8%2B7%2Ccff%2B7%2Cc157%2B7&limit=100&order=similar][Multiple nodes]]
- [[http://dev5.diffeo.com:10982/namespaces/miguel_sorting_desk/nodes/sid_1395342980-f2b0c629b5462959da7691e877016eef%23c2a8%2B7%2Ccff%2B7%2Cc157%2B7/][Single nodes]]

Some notes:

+ Text items can be found in =sentences=.
+ Bins' names are in the =NAME= property.
+ Sub-bins are created through user interaction.
+ Primary bin =node_id= for testing:
  Default: =kb_aHR0cHM6Ly9rYi5kaWZmZW8uY29tL2FsX2FocmFt=
  This seems faster: =kb_aHR0cHM6Ly9rYi5kaWZmZW8uY29tL2FsX2FocmFt=

*Main priority* is to have real data exposed in the UI.
** DONE Retrieve bin data from diffeo's API
- State "DONE"       from "IN-PROGRESS" [2014-08-20 Wed 19:19]
- State "IN-PROGRESS" from "TODO"       [2014-08-20 Wed 16:30]

** DONE Incorporate the =NAME= and =abs_url= in every text item
- State "DONE"       from "TODO"       [2014-08-20 Wed 16:14]
  
#+BEGIN_QUOTE
Inside the "features" object of each result are many smaller objects.  There is an object called "abs_url" that will generally have one value, and you should use this as the URL for displaying a hyperlink in each item in the queue.

The text to use as anchor text in each item should be the longest string in the "NAME" feature followed by the only string in the "title" feature. The "title" feature might not be present.  The NAME feature will always be present.
#+END_QUOTE

** DONE Allow primary bin's =node id= to be changed
- State "DONE"       from "TODO"       [2014-08-20 Wed 11:54]

Add an input box in the UI that users can edit.
** CANCELED Create common base class for =Bin= and =BinContainer=
- State "CANCELED"   from "TODO"       [2014-10-15 Wed 13:33] \\
  We would need multiple inheritance.
** CANCELED [#C] Implement user notifications
- State "CANCELED"   from "WAIT"       [2014-10-09 Thu 10:43] \\
  This will have to be implemented by the client via notification of events. Not Sorting Desk's concern.
- State "WAIT"       from "TODO"       [2014-09-05 Fri 11:21] \\
  Need further information.
A mechanism for displaying notifications to the user is needed for the purpose
of providing feedback, in particular in the cases when a user action is invalid
and results in an error.
** CANCELED [#B] Do not allow duplicate bins
- State "CANCELED"   from "WAIT"       [2014-09-04 Thu 13:02] \\
  Most likely can't be done reliably.
- State "WAIT"       from "TODO"       [2014-08-22 Fri 12:44] \\
  Specifications aren't clear as to how bins that are based on existing text items
  are created.
** CANCELED =Bin= and =BinContainer= classes take an =id= parameter
- State "CANCELED"   from "TODO"       [2014-08-22 Fri 13:22] \\
  The structure of a bin is awkward with the object itself not actually having a property representing its id. The object is instead pointed to by a key that itself is the id. There's no other way but to keep the id separate, unless we chose to implement different semantics, which I'm not happy about.
Why? Shouldn't that be in =bin= instead?
** CANCELED Assess JS and CSS needs of different types of data
- State "CANCELED"   from "TODO"       [2014-08-21 Thu 15:07] \\
  #BEGIN_QUOTE
  No need.  What you have is great.  We may want to revisit it later with several other features.
  #END_QUOTE
  
It was stated that "other types come from other sources including Facebook profiles, database records like MusicBrainz, and more", and that "the JS and HTML and CSS for displaying result should become more configurable and pluggable".

*** CANCELED Write up a draft proposal for the issues in parent topic
- State "CANCELED"   from "TODO"       [2014-08-21 Thu 15:09] \\
  See above.
Asked to write it as a long code comment block but might be best done in a
standalone *editable* text file that doesn't pollute the code and the repository?

** Conduct analysis on factory method pattern vs passing classes at init time [100%]
*** DONE Implement chosen method
- State "DONE"       from "TODO"       [2014-10-09 Thu 18:27]
*** CANCELED Make it so each class owns its options
- State "CANCELED"   from "TODO"       [2014-10-10 Fri 06:43] \\
  This method violates a number logic principles.
* Bugs [92%]
** TODO When items' DIV is selected, scrolling with keyboard both selects next item as well as scroll the DIV contents
Scrolling on the items' DIV container must be suppressed.

Note that this might not be possible if the browser does not allow control over the HTML element's focus.
** DONE Check that getBinData is defined if bins node given
- State "DONE"       from "TODO"       [2014-10-09 Thu 19:26]
** DONE `buttonDelete' not hidden after a bin is deleted
- State "DONE"       from "TODO"       [2014-10-01 Wed 10:37]
** DONE Fix failing tests
- State "DONE"       from "TODO"       [2014-09-30 Tue 18:31]
** DONE Detach event from bin/text item delete
- State "DONE"       from "TODO"       [2014-09-16 Tue 19:32]
It is currently broken.
** DONE Tests involving adding of bins sometimes fail
- State "DONE"       from "TODO"       [2014-09-16 Tue 11:47]
Failure occurs due to too small a delay.
** DONE Jasmine isn't working well with RequireJs
- State "DONE"       from "TODO"       [2014-09-16 Tue 11:40]
It presently instantiates its UI twice.
** DONE `setup' sometimes isn't available to tests
- State "DONE"       from "TODO"       [2014-09-16 Tue 11:40]
** DONE Release keyboard event on reset
- State "DONE"       from "TODO"       [2014-09-15 Mon 17:18]
** DONE =removePrimarySubBin=: comparing =bid= to itself
- State "DONE"       from "TODO"       [2014-09-07 Sun 10:47]
** DONE [#A] IE only: text items cannot be dropped onto primary bin
- State "DONE"       from "TODO"       [2014-09-06 Sat 10:41]
** DONE Fix error thrown when manual bin add cancelled
- State "DONE"       from "TODO"       [2014-09-06 Sat 10:41]
** DONE [#C] Several draggable/droppable nodes use hard-coded CSS classes
- State "DONE"       from "TODO"       [2014-09-05 Fri 11:52]
Make it configurable
** DONE [#C] A bin's shortcut is still active after it is deleted
- State "DONE"       from "TODO"       [2014-09-05 Fri 11:38]
