<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Sorting Desk</title>
  
  <link rel="stylesheet" href="css/theme-default.css" media="screen" />
  <link rel="stylesheet" href="js/jquery-ui-1.11.0.custom/jquery-ui.min.css" media="screen" />
  
  <script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
  <script type="text/javascript" src="js/jquery-ui-1.11.0.custom/jquery-ui.min.js"></script>

  <!-- Sorting Desk -->
  <script type="text/javascript" src="../src/SortingDesk.js"></script>

  <!-- Fake API -->
  <script type="text/javascript" src="js/api-sorting_desk.js"></script>
  
  <!-- Main initialisation logic -->
  <script type="text/javascript">

/* Instantiate fake API */
$(function () {
  function instantiateUi()
  {
    $("#items").children().remove();
    $("#bins").children().remove();
    
    g_sortingDesk = new SortingDesk( {
      nodes: {
        items: $("#items"),
        bins: $("#bins"),
        binDelete: $("#button-delete"),
        loading: $("#loading")
      },
      css: {                      /* This tree is optional: see
                                   * `SortingDesk.defaults' */
        primaryBinOuterWrapper: "wrapper-primary-bin-outer",
        primaryBinInnerWrapper: "wrapper-primary-bin-inner",
        secondaryBinsWrapper: "wrapper-secondary-bin",
        leftmostBin: "left"
      },
      primaryContentId: ApiData.primaryContentId,
      secondaryContentIds: ApiData.secondaryContentIds,
      visibleItems: 15
    }, {
      moreTexts: Api.moreTexts,
      getBinData: Api.getBinData,
      saveBinData: Api.saveBinData,
      addSecondaryBin: Api.addSecondaryBin,
      removeSecondaryBin: Api.removeSecondaryBin,
      renderText: Api.renderText,
      renderPrimaryBin: Api.renderPrimaryBin,
      renderPrimarySubBin: Api.renderPrimarySubBin,
      renderSecondaryBin: Api.renderSecondaryBin,
      renderAddButton: Api.renderAddButton
    } );
  }
  
  $("#primary-node-id")
    .val(ApiData.primaryContentId)
    .change(function () {
      ApiData.primaryContentId = this.value;
      instantiateUi();
    } );

  $(".wrapper").fadeIn();
  instantiateUi();
});
    </script>
</head>
<body>
  <div id="wrapper-outer">
    <div class="debug-controls">
      <label for="primary-node-id">Primary node id:&nbsp;<input id="primary-node-id" type="text" /></label>
    </div>
    <div id="wrapper-bins" class="wrapper">
      <div id="bins">
      </div>
    </div>
    <div id="wrapper-items" class="wrapper">
      <div id="items">
      </div>
    </div>
  </div>
  <div id="button-delete">X</div>
  <div id="loading">Loading...</div>
</body>
</html>