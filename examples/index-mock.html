<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Sorting Desk - Offline</title>
  
  <link rel="stylesheet" href="css/theme-default.css" media="screen" />
  <link rel="stylesheet" href="../src/main/css/SortingDesk.css" media="screen" />

  <!-- Libraries -->
  <script type="text/javascript" src="lib/require-2.1.14.min.js"></script>
  
  <!-- Main initialisation logic -->
  <script type="text/javascript">

  require.config( {
    baseUrl: '../',
    paths: {
      "SortingDesk": "src/main/SortingDesk",
      "API-SortingDesk": "src/api/api-sorting_desk-mock",
      "API-Data": "src/api/data/al_ahram.json?",
      "jQuery": "lib/jquery-2.1.1.min"
    }
  } );
                
  require( [ "SortingDesk", "API-SortingDesk" ], function () {
    var loading = $("#loading"),
        contentIds = [
          {
            node_id: '#100',
            features: { NAME: { "Irrelevant": 0 } },
            children: [
              {
                node_id: "test-1",
                features: { NAME: { "Inner irrelevancy": 0 } }
              },
              {
                node_id: "test-2",
                features: { NAME: { "Additional irrelevancy": 0 } }
              },
              {
                node_id: "test-3",
                features: { NAME: { "Sub-par irrelevancy": 0 } }
              },
              {
                node_id: "test-4",
                features: { NAME: { "Worrying irrelevancy": 0 } }
              }
            ]
          },
          { node_id: '^1$0#1', features: { NAME: { "Rubbish": 0 } } },
          { node_id: '1_0%%^&#2', features: { NAME: { "Keep": 0 } } }
        ],
        nitems = $("#items"),
        nbins = $("#bins"),
        height = $(window).height() - nitems.offset().top - 45,
        requests = 0;

    $(".wrapper").fadeIn();
    nitems.height(height);
    nbins.height(height);

    new SortingDesk.Instance( {
      nodes: {
        items: nitems,
        bins: nbins,
        buttonDismiss: $("#button-dismiss")
      },
      contentIds: Api.initialise(g_descriptor, contentIds),
      visibleItems: 15
    }, $.extend(Api, {
      onRequestStart: function () { if(!requests++) loading.stop().fadeIn(); },
      onRequestStop: function () { if(!--requests) loading.stop().fadeOut(); }
    } ) );
    
    g_descriptor = null;
    
  });

    </script>
</head>
<body>
  <div id="wrapper-outer">
    <div id="wrapper-bins" class="wrapper">
      <div id="bins">
      </div>
    </div>
    <div id="wrapper-items" class="wrapper">
      <div id="items">
      </div>
    </div>
  </div>
  <div id="button-dismiss" class="sd-button-dismiss">X</div>
  <div id="loading">Loading...</div>
</body>
</html>
